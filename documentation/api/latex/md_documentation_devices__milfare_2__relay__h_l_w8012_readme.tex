\hypertarget{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md10}{}\doxysection{brief description}\label{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md10}
Searching for additional sonoff minis i stumbled upon this small modules to be placed behind wall switches (if you have the space) for less the 10â‚¬. I knew that the


\begin{DoxyItemize}
\item This is a basic implementation of all the functionalities
\end{DoxyItemize}

{\bfseries{Be aware!}} you are playing with mains power. Never connect to mains and your computer at the same time! Check live a neutral before connecting.\hypertarget{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md11}{}\doxysection{hardware}\label{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md11}

\begin{DoxyItemize}
\item two pcbs with a 2mm board to board connector
\item ESP8266ex on the digital board
\item 1MB spi flash chip \+:(
\item 1 green led wired to GPIO0
\item 2mm programming header with TX/\+RX, GPIO0, reset, 3.\+3V and GND
\item 2 relays (one is connected to TX! WTF)
\item 2 mains input sensing GPIOs to connect switches
\item HLW8012 power meter sensor on the mains board
\item a buzzer (drawing a lot of power so my FTDI232 board can\textquotesingle{}t deliver that via the build in 3.\+3V regulator! Perhaps you have to provide extra 5V via the board to board interconnection)
\end{DoxyItemize}\hypertarget{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md12}{}\doxysection{flashing}\label{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md12}

\begin{DoxyItemize}
\item you can pop out the digital pcb which is glued in with double sided tape and solder tx,rx and ground wires on the pads from the back
\item if the 3.\+3v power supply from your USB to serial adapter you can feed in 5V via the interconnection
\item flash your {\ttfamily config.\+json} and your firmware via serial
\item OTA via MQTT is supported
\end{DoxyItemize}\hypertarget{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md13}{}\doxysection{plugins used}\label{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md13}

\begin{DoxyItemize}
\item {\bfseries{\mbox{\hyperlink{classa___g_p_i_o}{a\+\_\+\+GPIO}}}} to switch the relays
\item {\bfseries{\mbox{\hyperlink{classi___g_p_i_o}{i\+\_\+\+GPIO}}}} for the switch inputs
\item {\bfseries{a\+\_\+\+PWM}} to play tones on the buzzer
\item {\bfseries{s\+\_\+\+HLW8012}} to measure power consumption
\end{DoxyItemize}\hypertarget{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md14}{}\doxysection{code}\label{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md14}
\hypertarget{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md15}{}\doxysubsection{custom functions}\label{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md15}
{\itshape none}\hypertarget{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md16}{}\doxysubsection{callback functions}\label{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md16}
{\itshape none}\hypertarget{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md17}{}\doxysubsection{setup}\label{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md17}

\begin{DoxyCode}{0}
\DoxyCodeLine{\{C++\}}

\end{DoxyCode}
\hypertarget{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md18}{}\doxysubsection{loop}\label{md_documentation_devices__milfare_2__relay__h_l_w8012_readme_autotoc_md18}
{\itshape none} 